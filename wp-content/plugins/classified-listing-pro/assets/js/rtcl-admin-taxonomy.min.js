!function(t){t(".rtcl-categories-upload-image").on("click",function(e){e.preventDefault();var r,i,a=t(this).parents(".rtcl-term-group-wrap");void 0===r?((r=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",multiple:!1})).on("insert",function(){if(i=r.state().get("selection").first().toJSON(),!(0>t.trim(i.url.length))){var e=void 0===i.sizes.thumbnail?i.url:i.sizes.thumbnail.url;a.find(".rtcl-category-image-id").val(i.id),a.find(".rtcl-categories-image-wrapper").html('<img src="'+e+'" />')}}),r.open()):r.open()}),t(".rtcl-categories-remove-image").on("click",function(e){if(e.preventDefault(),confirm("Are you sure to delete?")){var r=t(this).parents(".rtcl-term-group-wrap");r.find(".rtcl-category-image-id").val(""),r.find(".rtcl-categories-image-wrapper").html("")}}),t(document).ajaxComplete(function(e,r,i){if(t("#tag-rtcl-order").length){var a=i.data?i.data.split("&"):"";if(-1!==t.inArray("action=add-tag",a)){var c=r.responseXML;""!=t(c).find("term_id").text()&&(t("#tag-rtcl-order").val(0),t(".rtcl-category-image-id").val(""),t("#rtcl-category-types input:checkbox").attr("checked",!1),t("#rtcl-category-types input:checkbox[value=sell]").attr("checked",!0),t(".rtcl-categories-image-wrapper").html(""),t("#tag-rtcl-icon").prop("selectedIndex",0))}}}),t(function(){if(t.fn.select2){var e=function(e){var r=e.element;return'<i class="rtcl-icon rtcl-icon-'+t(r).data("icon")+'"></i> '+e.text};t(".rtcl-select2").select2({dropdownAutoWidth:!0,width:"100%"}),t(".rtcl-select2-icon").select2({dropdownAutoWidth:!0,width:"100%",templateSelection:e,templateResult:e,escapeMarkup:function(t){return t}})}})}(jQuery);
